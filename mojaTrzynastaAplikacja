import java.io.BufferedWriter;
import java.io.IOException;
import java.nio.file.Files;
import java.nio.file.Paths;
import java.util.HashMap;
import java.util.List;
import java.util.Map;
import java.util.Scanner;

public class mojaTrzynastaAplikacja {
    public static void main(String[] args) {

        public static void main(String [args]); {
                Scanner scanner = new Scanner(System.in);

                String inputFilePath;
                String outputFilePath;
                boolean fileExists = false;

                while (!fileExists) {
                    System.out.print("Podaj ścieżkę do pliku wejściowego: ");
                    inputFilePath = scanner.nextLine();
                    fileExists = Files.exists(Paths.get(inputFilePath));

                    if (!fileExists) {
                        System.out.println("Plik nie istnieje. Proszę podać poprawną ścieżkę.");
                    } else {
                        System.out.print("Podaj ścieżkę do pliku wyjściowego: ");
                        outputFilePath = scanner.nextLine();

                        try {
                            List<String> lines = Files.readAllLines(Paths.get(inputFilePath));

                            Map<String, Integer> wordCount = new HashMap<>();
                            int totalWords = 0;

                            for (String line : lines) {
                                String[] words = line.split("\\s+");
                                totalWords += words.length;
                                for (String word : words) {
                                    word = word.toLowerCase();
                                    wordCount.put(word, wordCount.getOrDefault(word, 0) + 1);
                                }
                            }

                            System.out.println("Liczba wszystkich słów wynosi: " + totalWords);

                            System.out.println("Liczba wystąpień każdego słowa to:");
                            for (Map.Entry<String, Integer> entry : wordCount.entrySet()) {
                                System.out.println(entry.getKey() + ": " + entry.getValue());
                            }

                            try (BufferedWriter writer = Files.newBufferedWriter(Paths.get(outputFilePath))) {
                                writer.write("Nazwa pliku wejściowego: " + inputFilePath + "\n");
                                writer.write("Liczba wszystkich słów to: " + totalWords + "\n");
                                writer.write("Liczba wystąpień każdego słowa wynosi:\n");
                                for (Map.Entry<String, Integer> entry : wordCount.entrySet()) {
                                    ((BufferedWriter) writer).write(entry.getKey() + ": " + entry.getValue() + "\n");
                                }
                            }

                        } catch (IOException e) {
                            System.out.println("Wystąpił błąd podczas przetwarzania pliku: " + e.getMessage());
                        }
                    }
                }
                scanner.close();
            }
        }
    }